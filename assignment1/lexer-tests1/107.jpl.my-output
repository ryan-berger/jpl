NEWLINE
FN 'fn'
VARIABLE 'sphere_point'
LPAREN '('
LCURLY '{'
VARIABLE 'x'
COLON ':'
VARIABLE 'float'
COMMA ','
VARIABLE 'y'
COLON ':'
VARIABLE 'float'
RCURLY '}'
RPAREN ')'
COLON ':'
VARIABLE 'float3'
LCURLY '{'
NEWLINE
LET 'let'
VARIABLE 'r'
EQUALS '='
FLOATVAL '1.0'
BINOP '+'
LPAREN '('
VARIABLE 'x'
BINOP '*'
VARIABLE 'x'
BINOP '+'
VARIABLE 'y'
BINOP '*'
VARIABLE 'y'
RPAREN ')'
BINOP '/'
FLOATVAL '16.0'
NEWLINE
LET 'let'
VARIABLE 't'
EQUALS '='
LPAREN '('
FLOATVAL '8.0'
BINOP '-'
VARIABLE 'sqrt'
LPAREN '('
FLOATVAL '64.0'
BINOP '-'
FLOATVAL '60.0'
BINOP '*'
VARIABLE 'r'
RPAREN ')'
RPAREN ')'
BINOP '/'
LPAREN '('
FLOATVAL '2.0'
BINOP '*'
VARIABLE 'r'
RPAREN ')'
NEWLINE
RETURN 'return'
LCURLY '{'
FLOATVAL '4.0'
BINOP '-'
VARIABLE 't'
COMMA ','
VARIABLE 't'
BINOP '*'
VARIABLE 'x'
BINOP '/'
FLOATVAL '4.0'
COMMA ','
VARIABLE 't'
BINOP '*'
VARIABLE 'y'
BINOP '/'
FLOATVAL '4.0'
RCURLY '}'
NEWLINE
RCURLY '}'
NEWLINE
FN 'fn'
VARIABLE 'energy'
LPAREN '('
LCURLY '{'
VARIABLE 'x'
COLON ':'
VARIABLE 'float'
COMMA ','
VARIABLE 'y'
COLON ':'
VARIABLE 'float'
COMMA ','
VARIABLE 'z'
COLON ':'
VARIABLE 'float'
RCURLY '}'
COMMA ','
LCURLY '{'
VARIABLE 'lx'
COLON ':'
VARIABLE 'float'
COMMA ','
VARIABLE 'ly'
COLON ':'
VARIABLE 'float'
COMMA ','
VARIABLE 'lz'
COLON ':'
VARIABLE 'float'
RCURLY '}'
RPAREN ')'
COLON ':'
VARIABLE 'float'
LCURLY '{'
NEWLINE
LET 'let'
VARIABLE 'd2'
EQUALS '='
LPAREN '('
VARIABLE 'lx'
BINOP '-'
VARIABLE 'x'
RPAREN ')'
BINOP '*'
LPAREN '('
VARIABLE 'lx'
BINOP '-'
VARIABLE 'x'
RPAREN ')'
BINOP '+'
LPAREN '('
VARIABLE 'ly'
BINOP '-'
VARIABLE 'y'
RPAREN ')'
BINOP '*'
LPAREN '('
VARIABLE 'ly'
BINOP '-'
VARIABLE 'y'
RPAREN ')'
BINOP '+'
LPAREN '('
VARIABLE 'lz'
BINOP '-'
VARIABLE 'z'
RPAREN ')'
BINOP '*'
LPAREN '('
VARIABLE 'lz'
BINOP '-'
VARIABLE 'z'
RPAREN ')'
NEWLINE
LET 'let'
VARIABLE 'r2'
EQUALS '='
VARIABLE 'y'
BINOP '*'
VARIABLE 'y'
BINOP '+'
VARIABLE 'z'
BINOP '*'
VARIABLE 'z'
NEWLINE
LET 'let'
VARIABLE 'alpha'
EQUALS '='
VARIABLE 'atan2'
LPAREN '('
VARIABLE 'r2'
COMMA ','
FLOATVAL '4.0'
BINOP '-'
VARIABLE 'x'
RPAREN ')'
NEWLINE
LET 'let'
VARIABLE 'beta'
EQUALS '='
VARIABLE 'atan2'
LPAREN '('
VARIABLE 'r2'
COMMA ','
VARIABLE 'x'
RPAREN ')'
NEWLINE
LET 'let'
VARIABLE 'gamma'
EQUALS '='
VARIABLE 'alpha'
BINOP '+'
VARIABLE 'beta'
NEWLINE
RETURN 'return'
VARIABLE 'cos'
LPAREN '('
VARIABLE 'gamma'
RPAREN ')'
BINOP '/'
VARIABLE 'd2'
NEWLINE
RCURLY '}'
NEWLINE
FN 'fn'
VARIABLE 'color'
LPAREN '('
VARIABLE 'x'
COLON ':'
VARIABLE 'float'
COMMA ','
LCURLY '{'
VARIABLE 'lx'
COLON ':'
VARIABLE 'float'
COMMA ','
VARIABLE 'ly'
COLON ':'
VARIABLE 'float'
COMMA ','
VARIABLE 'lz'
COLON ':'
VARIABLE 'float'
RCURLY '}'
RPAREN ')'
COLON ':'
VARIABLE 'float4'
LCURLY '{'
NEWLINE
RETURN 'return'
LCURLY '{'
FLOATVAL '9.0'
BINOP '*'
VARIABLE 'x'
COMMA ','
FLOATVAL '9.0'
BINOP '*'
VARIABLE 'x'
COMMA ','
FLOATVAL '9.0'
BINOP '*'
VARIABLE 'x'
COMMA ','
FLOATVAL '1.0'
RCURLY '}'
NEWLINE
RCURLY '}'
NEWLINE
FN 'fn'
VARIABLE 'pixel'
LPAREN '('
LCURLY '{'
VARIABLE 'x'
COLON ':'
VARIABLE 'float'
COMMA ','
VARIABLE 'y'
COLON ':'
VARIABLE 'float'
RCURLY '}'
COMMA ','
VARIABLE 'ls'
COLON ':'
VARIABLE 'float3'
RPAREN ')'
COLON ':'
VARIABLE 'float4'
LCURLY '{'
NEWLINE
RETURN 'return'
VARIABLE 'color'
LPAREN '('
IF 'if'
LPAREN '('
LPAREN '('
VARIABLE 'x'
BINOP '*'
VARIABLE 'x'
RPAREN ')'
BINOP '+'
LPAREN '('
VARIABLE 'y'
BINOP '*'
VARIABLE 'y'
RPAREN ')'
BINOP '<'
LPAREN '('
FLOATVAL '16.0'
BINOP '/'
FLOATVAL '15.0'
RPAREN ')'
RPAREN ')'
THEN 'then'
VARIABLE 'energy'
LPAREN '('
VARIABLE 'sphere_point'
LPAREN '('
LCURLY '{'
VARIABLE 'x'
COMMA ','
VARIABLE 'y'
RCURLY '}'
RPAREN ')'
COMMA ','
VARIABLE 'ls'
RPAREN ')'
ELSE 'else'
FLOATVAL '0.0'
COMMA ','
VARIABLE 'ls'
RPAREN ')'
NEWLINE
RCURLY '}'
NEWLINE
ASSERT 'assert'
VARIABLE 'argnum'
BINOP '=='
INTVAL '3'
COMMA ','
STRING '"Need exactly 3 arguments for the light source coordinates"'
NEWLINE
LET 'let'
VARIABLE 'ls'
EQUALS '='
LCURLY '{'
VARIABLE 'float'
LPAREN '('
VARIABLE 'args'
LSQUARE '['
INTVAL '0'
RSQUARE ']'
RPAREN ')'
COMMA ','
VARIABLE 'float'
LPAREN '('
VARIABLE 'args'
LSQUARE '['
INTVAL '1'
RSQUARE ']'
RPAREN ')'
COMMA ','
VARIABLE 'float'
LPAREN '('
VARIABLE 'args'
LSQUARE '['
INTVAL '2'
RSQUARE ']'
RPAREN ')'
RCURLY '}'
NEWLINE
LET 'let'
LCURLY '{'
VARIABLE 'W'
COMMA ','
VARIABLE 'H'
RCURLY '}'
EQUALS '='
LCURLY '{'
INTVAL '400'
COMMA ','
INTVAL '400'
RCURLY '}'
NEWLINE
TIME 'time'
LET 'let'
VARIABLE 'img'
EQUALS '='
ARRAY 'array'
LSQUARE '['
VARIABLE 'i'
COLON ':'
VARIABLE 'W'
COMMA ','
VARIABLE 'j'
COLON ':'
VARIABLE 'H'
RSQUARE ']'
VARIABLE 'pixel'
LPAREN '('
LCURLY '{'
VARIABLE 'float'
LPAREN '('
VARIABLE 'i'
BINOP '-'
INTVAL '200'
RPAREN ')'
BINOP '/'
FLOATVAL '100.0'
COMMA ','
VARIABLE 'float'
LPAREN '('
VARIABLE 'j'
BINOP '-'
INTVAL '200'
RPAREN ')'
BINOP '/'
FLOATVAL '100.0'
RCURLY '}'
COMMA ','
VARIABLE 'ls'
RPAREN ')'
NEWLINE
WRITE 'write'
VARIABLE 'image'
VARIABLE 'img'
TO 'to'
STRING '"sphere.png"'
NEWLINE
END_OF_FILE
Compilation succeeded
